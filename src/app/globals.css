@import "tailwindcss";
@import "tw-animate-css";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

/* =============================================================================
   THEME SYSTEM
   Modular CSS files provide HSL fallback, OKLCH modern colors, Tailwind
   mapping layer, and density/spacing system.
   Import order matters: fallback → primitives → tokens → mapping → density.
   ============================================================================= */

@import "../themes/fallback.css";
@import "../themes/primitives.css";
@import "../themes/tokens.css";
@import "../themes/mapping.css";
@import "../themes/density.css";

@layer base {
  :root {
    font-family:
      var(--font-fira-sans), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  }

  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    font-family:
      var(--font-fira-sans), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  }
}

@layer utilities {
  :root {
    --scrollbar-bg: hsl(var(--foreground));
    --scrollbar-bg: color-mix(in oklch, var(--background) 80%, white 40%);
  }

  @supports (scrollbar-width: thin) {
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--scrollbar-bg) var(--sidebar);
    }

    [data-slot="dialog-body"] {
      scrollbar-color: var(--scrollbar-bg) var(--background);
    }
  }

  @supports not (scrollbar-width: thin) {
    *::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }

    *::-webkit-scrollbar-track {
      background: var(--sidebar);
    }

    *::-webkit-scrollbar-thumb {
      background: var(--scrollbar-bg);
      border-radius: 6px;
      border: 3px solid transparent;
      background-clip: padding-box;
    }

    *::-webkit-scrollbar-thumb:hover {
      background: color-mix(in oklch, var(--background) 80%, white 60%);
      border-radius: 6px;
      border: 3px solid transparent;
      background-clip: padding-box;
    }

    [data-slot="dialog-body"]::-webkit-scrollbar-track {
      background: var(--background);
    }
  }
}
